import requests
import json
from time import sleep

class Delta():
    def __init__(self, url, headers, payload):
        self.url = url
        self.headers = headers
        self.payload = payload
        self.page = 1           # STARTING PAGE
        self.offset = 0         # ITEMS STARTING POINT COUNT WITH 5/PAGE

    def payload_modification(self):
        """
          Payload is a Json body that is send by client side using POST request
          It contains information that can advance to next pages and offset like
          how many items per page and many others. It used so we can get next
          page and change offset value to get next page items.
          Here i am modifying it to advance to next page.
        """

        self.payload = "[\n    {\n        \"query\": \"mutation LogBBMLInteraction($interaction: ClientInteractionOpaqueInput!) {\\n  logProductInteraction(interaction: $interaction)\\n}\\n\",\n        \"variables\": {\n            \"interaction\": {\n                \"productInteraction\": {\n                    \"interaction_type\": \"CLICK\",\n                    \"site\": {\n                        \"site_name\": \"ta\",\n                        \"site_business_unit\": \"Flights\",\n                        \"site_domain\": \"www.tripadvisor.com\"\n                    },\n                    \"pageview\": {\n                        \"pageview_request_uid\": \"Xhh1XAokKXMAAITCuP0AAAAr\",\n                        \"pageview_attributes\": {\n                            \"location_id\": 8729060,\n                            \"geo_id\": 1,\n                            \"servlet_name\": \"Airline_Review\"\n                        }\n                    },\n                    \"user\": {\n                        \"user_agent\": \"Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.117 Safari/537.36\",\n                        \"site_persistent_user_uid\": \"web153a.39.57.42.14.16EE7492CDA\",\n                        \"unique_user_identifiers\": {\n                            \"session_id\": \"5BCDED229346356F7F2B1D70E356E138\"\n                        }\n                    },\n                    \"search\": {},\n                    \"item_group\": {\n                        \"item_group_collection_key\": \"Xhh1XAokKXMAAITCuP0AAAAr\"\n                    },\n                    \"item\": {\n                        \"product_type\": \"Flights\",\n                        \"item_id_type\": \"ta-location-id\",\n                        \"item_id\": 8729060,\n                        \"item_attributes\": {\n                            \"element_type\": \"next\",\n                            \"action_name\": \"REVIEW_NAV\",\n                            \"page_number\": %d,\n                            \"offset\": %d,\n                            \"limit\": 5\n                        }\n                    }\n                }\n            }\n        }\n    },\n    {\n        \"query\": \"query ReviewListQuery($locationId: Int!, $offset: Int, $limit: Int, $filters: [FilterConditionInput!], $prefs: ReviewListPrefsInput, $initialPrefs: ReviewListPrefsInput, $filterCacheKey: String, $prefsCacheKey: String, $keywordVariant: String!, $needKeywords: Boolean = true) {\\n  cachedFilters: personalCache(key: $filterCacheKey)\\n  cachedPrefs: personalCache(key: $prefsCacheKey)\\n  locations(locationIds: [$locationId]) {\\n    locationId\\n    parentGeoId\\n    name\\n    placeType\\n    reviewSummary {\\n      rating\\n      count\\n    }\\n    keywords(variant: $keywordVariant) @include(if: $needKeywords) {\\n      keywords {\\n        keyword\\n      }\\n    }\\n    ... on LocationInformation {\\n      parentGeoId\\n    }\\n    ... on LocationInformation {\\n      parentGeoId\\n    }\\n    ... on LocationInformation {\\n      name\\n      currentUserOwnerStatus {\\n        isValid\\n      }\\n    }\\n    ... on LocationInformation {\\n      locationId\\n      currentUserOwnerStatus {\\n        isValid\\n      }\\n    }\\n    ... on LocationInformation {\\n      locationId\\n      parentGeoId\\n      accommodationCategory\\n      currentUserOwnerStatus {\\n        isValid\\n      }\\n      url\\n    }\\n    reviewListPage(page: {offset: $offset, limit: $limit}, filters: $filters, prefs: $prefs, initialPrefs: $initialPrefs, filterCacheKey: $filterCacheKey, prefsCacheKey: $prefsCacheKey) {\\n      totalCount\\n      preferredReviewIds\\n      reviews {\\n        ... on Review {\\n          id\\n          url\\n          location {\\n            locationId\\n            name\\n          }\\n          createdDate\\n          publishedDate\\n          provider {\\n            isLocalProvider\\n          }\\n          userProfile {\\n            id\\n            userId: id\\n            isMe\\n            isVerified\\n            displayName\\n            username\\n            avatar {\\n              id\\n              photoSizes {\\n                url\\n                width\\n                height\\n              }\\n            }\\n            hometown {\\n              locationId\\n              fallbackString\\n              location {\\n                locationId\\n                additionalNames {\\n                  long\\n                }\\n                name\\n              }\\n            }\\n            contributionCounts {\\n              sumAllUgc\\n              helpfulVote\\n            }\\n            route {\\n              url\\n            }\\n          }\\n        }\\n        ... on Review {\\n          title\\n          language\\n          url\\n        }\\n        ... on Review {\\n          language\\n          translationType\\n        }\\n        ... on Review {\\n          roomTip\\n        }\\n        ... on Review {\\n          tripInfo {\\n            stayDate\\n          }\\n          location {\\n            placeType\\n          }\\n        }\\n        ... on Review {\\n          tripInfo {\\n            stayDate\\n          }\\n          location {\\n            placeType\\n          }\\n        }\\n        ... on Review {\\n          additionalRatings {\\n            rating\\n            ratingLabel\\n          }\\n        }\\n        ... on Review {\\n          tripInfo {\\n            tripType\\n          }\\n        }\\n        ... on Review {\\n          language\\n          translationType\\n          mgmtResponse {\\n            id\\n            language\\n            translationType\\n          }\\n        }\\n        ... on Review {\\n          text\\n          publishedDate\\n          username\\n          connectionToSubject\\n          language\\n          mgmtResponse {\\n            id\\n            text\\n            language\\n            publishedDate\\n            username\\n            connectionToSubject\\n          }\\n        }\\n        ... on Review {\\n          id\\n          locationId\\n          title\\n          text\\n          rating\\n          absoluteUrl\\n          mcid\\n          translationType\\n          mtProviderId\\n          photos {\\n            id\\n            statuses\\n            photoSizes {\\n              url\\n              width\\n              height\\n            }\\n          }\\n          userProfile {\\n            id\\n            displayName\\n            username\\n          }\\n        }\\n        ... on Review {\\n          mgmtResponse {\\n            id\\n          }\\n          provider {\\n            isLocalProvider\\n          }\\n        }\\n        ... on Review {\\n          translationType\\n          location {\\n            locationId\\n            parentGeoId\\n          }\\n          provider {\\n            isLocalProvider\\n            isToolsProvider\\n          }\\n          original {\\n            id\\n            url\\n            locationId\\n            userId\\n            language\\n            submissionDomain\\n          }\\n        }\\n        ... on Review {\\n          locationId\\n          mcid\\n          attribution\\n        }\\n        ... on Review {\\n          __typename\\n          locationId\\n          helpfulVotes\\n          photoIds\\n          route {\\n            url\\n          }\\n          socialStatistics {\\n            followCount\\n            isFollowing\\n            isLiked\\n            isReposted\\n            isSaved\\n            likeCount\\n            repostCount\\n            tripCount\\n          }\\n          status\\n          userId\\n          userProfile {\\n            id\\n            displayName\\n            isFollowing\\n          }\\n          location {\\n            __typename\\n            locationId\\n            additionalNames {\\n              normal\\n              long\\n              longOnlyParent\\n              longParentAbbreviated\\n              longOnlyParentAbbreviated\\n              longParentStateAbbreviated\\n              longOnlyParentStateAbbreviated\\n              geo\\n              abbreviated\\n              abbreviatedRaw\\n              abbreviatedStateTerritory\\n              abbreviatedStateTerritoryRaw\\n            }\\n            parent {\\n              locationId\\n              additionalNames {\\n                normal\\n                long\\n                longOnlyParent\\n                longParentAbbreviated\\n                longOnlyParentAbbreviated\\n                longParentStateAbbreviated\\n                longOnlyParentStateAbbreviated\\n                geo\\n                abbreviated\\n                abbreviatedRaw\\n                abbreviatedStateTerritory\\n                abbreviatedStateTerritoryRaw\\n              }\\n            }\\n          }\\n        }\\n        ... on Review {\\n          text\\n          language\\n        }\\n        ... on Review {\\n          locationId\\n          absoluteUrl\\n          mcid\\n          translationType\\n          mtProviderId\\n          originalLanguage\\n          rating\\n        }\\n        ... on Review {\\n          id\\n          locationId\\n          title\\n          labels\\n          rating\\n          absoluteUrl\\n          mcid\\n          translationType\\n          mtProviderId\\n          alertStatus\\n        }\\n      }\\n    }\\n    reviewAggregations {\\n      ratingCounts\\n      languageCounts\\n      alertStatusCount\\n    }\\n  }\\n}\\n\",\n        \"variables\": {\n            \"locationId\": 8729060,\n            \"offset\": %d,\n            \"filters\": [\n                {\n                    \"axis\": \"LANGUAGE\",\n                    \"selections\": [\n                        \"en\"\n                    ]\n                }\n            ],\n            \"prefs\": null,\n            \"initialPrefs\": {},\n            \"limit\": 5,\n            \"filterCacheKey\": null,\n            \"prefsCacheKey\": \"locationReviewPrefs\",\n            \"needKeywords\": false,\n            \"keywordVariant\": \"location_keywords_v2_llr_order_30_en\"\n        }\n    }\n]"%(self.page, self.offset, self.offset)
  
    def send_request(self):
      """
        Sending request to target url and returning the json object that contain
        all the data from a page and payload modification will help us to send 
        requests to other pages too and get the json response in bytes. we use 
        LOADS to convert bytes to python dict/list so we can extract data much
        easily.
      """
      while self.page <= 10:
          if self.page != 1:
              self.payload_modification()
              if self.page <= 10:
                  response = requests.request("POST", self.url, headers=self.headers, data=self.payload)
                  if response.status_code == 200:
                      data = response.text.encode('utf-8')
                      data = json.loads(data)
                      return data
          else:   
              response = requests.request("POST", self.url, headers=self.headers, data=self.payload)
              if response.status_code == 200:
                  data = response.text.encode('utf-8')
                  data = json.loads(data)
                  return data


    def extract_data(self, delta):
        if delta == None:
            return

        for review in delta[1].get('data').get('locations')[0].get('reviewListPage').get('reviews'):
             print(review.get('title'))
            
        self.page += 1    # TO ADVANCE TO NEXT PAGE
        self.offset += 5  # TO GET NEXT 5 ITEMS FROM THE PAGE
        sleep(10)         
        self.extract_data(self.send_request())
              

# ------------------------------------------------------------------------------------------------------------------------
# TARGET SITE ADDRESS
url = "https://www.tripadvisor.com/data/graphql/batched"

# IT IS SEND FROM CLIENT SIDE WHEN IT IS A POST REQUEST. 
payload = "[\n    {\n        \"query\": \"mutation LogBBMLInteraction($interaction: ClientInteractionOpaqueInput!) {\\n  logProductInteraction(interaction: $interaction)\\n}\\n\",\n        \"variables\": {\n            \"interaction\": {\n                \"productInteraction\": {\n                    \"interaction_type\": \"CLICK\",\n                    \"site\": {\n                        \"site_name\": \"ta\",\n                        \"site_business_unit\": \"Flights\",\n                        \"site_domain\": \"www.tripadvisor.com\"\n                    },\n                    \"pageview\": {\n                        \"pageview_request_uid\": \"Xhh1XAokKXMAAITCuP0AAAAr\",\n                        \"pageview_attributes\": {\n                            \"location_id\": 8729060,\n                            \"geo_id\": 1,\n                            \"servlet_name\": \"Airline_Review\"\n                        }\n                    },\n                    \"user\": {\n                        \"user_agent\": \"Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.117 Safari/537.36\",\n                        \"site_persistent_user_uid\": \"web153a.39.57.42.14.16EE7492CDA\",\n                        \"unique_user_identifiers\": {\n                            \"session_id\": \"5BCDED229346356F7F2B1D70E356E138\"\n                        }\n                    },\n                    \"search\": {},\n                    \"item_group\": {\n                        \"item_group_collection_key\": \"Xhh1XAokKXMAAITCuP0AAAAr\"\n                    },\n                    \"item\": {\n                        \"product_type\": \"Flights\",\n                        \"item_id_type\": \"ta-location-id\",\n                        \"item_id\": 8729060,\n                        \"item_attributes\": {\n                            \"element_type\": \"next\",\n                            \"action_name\": \"REVIEW_NAV\",\n                            \"page_number\": 1,\n                            \"offset\": 0,\n                            \"limit\": 5\n                        }\n                    }\n                }\n            }\n        }\n    },\n    {\n        \"query\": \"query ReviewListQuery($locationId: Int!, $offset: Int, $limit: Int, $filters: [FilterConditionInput!], $prefs: ReviewListPrefsInput, $initialPrefs: ReviewListPrefsInput, $filterCacheKey: String, $prefsCacheKey: String, $keywordVariant: String!, $needKeywords: Boolean = true) {\\n  cachedFilters: personalCache(key: $filterCacheKey)\\n  cachedPrefs: personalCache(key: $prefsCacheKey)\\n  locations(locationIds: [$locationId]) {\\n    locationId\\n    parentGeoId\\n    name\\n    placeType\\n    reviewSummary {\\n      rating\\n      count\\n    }\\n    keywords(variant: $keywordVariant) @include(if: $needKeywords) {\\n      keywords {\\n        keyword\\n      }\\n    }\\n    ... on LocationInformation {\\n      parentGeoId\\n    }\\n    ... on LocationInformation {\\n      parentGeoId\\n    }\\n    ... on LocationInformation {\\n      name\\n      currentUserOwnerStatus {\\n        isValid\\n      }\\n    }\\n    ... on LocationInformation {\\n      locationId\\n      currentUserOwnerStatus {\\n        isValid\\n      }\\n    }\\n    ... on LocationInformation {\\n      locationId\\n      parentGeoId\\n      accommodationCategory\\n      currentUserOwnerStatus {\\n        isValid\\n      }\\n      url\\n    }\\n    reviewListPage(page: {offset: $offset, limit: $limit}, filters: $filters, prefs: $prefs, initialPrefs: $initialPrefs, filterCacheKey: $filterCacheKey, prefsCacheKey: $prefsCacheKey) {\\n      totalCount\\n      preferredReviewIds\\n      reviews {\\n        ... on Review {\\n          id\\n          url\\n          location {\\n            locationId\\n            name\\n          }\\n          createdDate\\n          publishedDate\\n          provider {\\n            isLocalProvider\\n          }\\n          userProfile {\\n            id\\n            userId: id\\n            isMe\\n            isVerified\\n            displayName\\n            username\\n            avatar {\\n              id\\n              photoSizes {\\n                url\\n                width\\n                height\\n              }\\n            }\\n            hometown {\\n              locationId\\n              fallbackString\\n              location {\\n                locationId\\n                additionalNames {\\n                  long\\n                }\\n                name\\n              }\\n            }\\n            contributionCounts {\\n              sumAllUgc\\n              helpfulVote\\n            }\\n            route {\\n              url\\n            }\\n          }\\n        }\\n        ... on Review {\\n          title\\n          language\\n          url\\n        }\\n        ... on Review {\\n          language\\n          translationType\\n        }\\n        ... on Review {\\n          roomTip\\n        }\\n        ... on Review {\\n          tripInfo {\\n            stayDate\\n          }\\n          location {\\n            placeType\\n          }\\n        }\\n        ... on Review {\\n          tripInfo {\\n            stayDate\\n          }\\n          location {\\n            placeType\\n          }\\n        }\\n        ... on Review {\\n          additionalRatings {\\n            rating\\n            ratingLabel\\n          }\\n        }\\n        ... on Review {\\n          tripInfo {\\n            tripType\\n          }\\n        }\\n        ... on Review {\\n          language\\n          translationType\\n          mgmtResponse {\\n            id\\n            language\\n            translationType\\n          }\\n        }\\n        ... on Review {\\n          text\\n          publishedDate\\n          username\\n          connectionToSubject\\n          language\\n          mgmtResponse {\\n            id\\n            text\\n            language\\n            publishedDate\\n            username\\n            connectionToSubject\\n          }\\n        }\\n        ... on Review {\\n          id\\n          locationId\\n          title\\n          text\\n          rating\\n          absoluteUrl\\n          mcid\\n          translationType\\n          mtProviderId\\n          photos {\\n            id\\n            statuses\\n            photoSizes {\\n              url\\n              width\\n              height\\n            }\\n          }\\n          userProfile {\\n            id\\n            displayName\\n            username\\n          }\\n        }\\n        ... on Review {\\n          mgmtResponse {\\n            id\\n          }\\n          provider {\\n            isLocalProvider\\n          }\\n        }\\n        ... on Review {\\n          translationType\\n          location {\\n            locationId\\n            parentGeoId\\n          }\\n          provider {\\n            isLocalProvider\\n            isToolsProvider\\n          }\\n          original {\\n            id\\n            url\\n            locationId\\n            userId\\n            language\\n            submissionDomain\\n          }\\n        }\\n        ... on Review {\\n          locationId\\n          mcid\\n          attribution\\n        }\\n        ... on Review {\\n          __typename\\n          locationId\\n          helpfulVotes\\n          photoIds\\n          route {\\n            url\\n          }\\n          socialStatistics {\\n            followCount\\n            isFollowing\\n            isLiked\\n            isReposted\\n            isSaved\\n            likeCount\\n            repostCount\\n            tripCount\\n          }\\n          status\\n          userId\\n          userProfile {\\n            id\\n            displayName\\n            isFollowing\\n          }\\n          location {\\n            __typename\\n            locationId\\n            additionalNames {\\n              normal\\n              long\\n              longOnlyParent\\n              longParentAbbreviated\\n              longOnlyParentAbbreviated\\n              longParentStateAbbreviated\\n              longOnlyParentStateAbbreviated\\n              geo\\n              abbreviated\\n              abbreviatedRaw\\n              abbreviatedStateTerritory\\n              abbreviatedStateTerritoryRaw\\n            }\\n            parent {\\n              locationId\\n              additionalNames {\\n                normal\\n                long\\n                longOnlyParent\\n                longParentAbbreviated\\n                longOnlyParentAbbreviated\\n                longParentStateAbbreviated\\n                longOnlyParentStateAbbreviated\\n                geo\\n                abbreviated\\n                abbreviatedRaw\\n                abbreviatedStateTerritory\\n                abbreviatedStateTerritoryRaw\\n              }\\n            }\\n          }\\n        }\\n        ... on Review {\\n          text\\n          language\\n        }\\n        ... on Review {\\n          locationId\\n          absoluteUrl\\n          mcid\\n          translationType\\n          mtProviderId\\n          originalLanguage\\n          rating\\n        }\\n        ... on Review {\\n          id\\n          locationId\\n          title\\n          labels\\n          rating\\n          absoluteUrl\\n          mcid\\n          translationType\\n          mtProviderId\\n          alertStatus\\n        }\\n      }\\n    }\\n    reviewAggregations {\\n      ratingCounts\\n      languageCounts\\n      alertStatusCount\\n    }\\n  }\\n}\\n\",\n        \"variables\": {\n            \"locationId\": 8729060,\n            \"offset\": 0,\n            \"filters\": [\n                {\n                    \"axis\": \"LANGUAGE\",\n                    \"selections\": [\n                        \"en\"\n                    ]\n                }\n            ],\n            \"prefs\": null,\n            \"initialPrefs\": {},\n            \"limit\": 5,\n            \"filterCacheKey\": null,\n            \"prefsCacheKey\": \"locationReviewPrefs\",\n            \"needKeywords\": false,\n            \"keywordVariant\": \"location_keywords_v2_llr_order_30_en\"\n        }\n    }\n]"

# MANDADOTORY REQUEST HEADERS.
headers = {
  'Content-Type': 'application/json',
  'Cookie': 'TAUnique=%1%enc%3AIbV6juT0gdIM4fRsThAvvLtBGRicaNN4oj%2FDYmNMQMI%3D; TASSK=enc%3AAAlz5g9oOt4Vkv59Rhe93bYfXQXh4okYF77F%2BQxeSutwJox1dy%2BjOtySTjIJixsM9CZx6IGRcSsiKcNhsrOuoe26OdOOoJY9T8vA63RdvuD0irYCI5%2FKRhBYhkl40FfA8w%3D%3D; __gads=ID=434ab6d2aed35f45:T=1575838523:S=ALNI_Maf2_pbjOpvpxIQbB9NCQTk3nvM1Q; CM=%1%PremiumMobSess%2C%2C-1%7Ct4b-pc%2C%2C-1%7CRestAds%2FRPers%2C%2C-1%7CRCPers%2C%2C-1%7CWShadeSeen%2C%2C-1%7CTheForkMCCPers%2C%2C-1%7CHomeASess%2C%2C-1%7CPremiumSURPers%2C%2C-1%7CPremiumMCSess%2C%2C-1%7CUVOwnersSess%2C%2C-1%7CRestPremRSess%2C%2C-1%7CCCSess%2C%2C-1%7CCYLSess%2C%2C-1%7CPremRetPers%2C%2C-1%7CViatorMCPers%2C%2C-1%7Csesssticker%2C%2C-1%7CPremiumORSess%2C%2C-1%7Ct4b-sc%2C%2C-1%7CRestAdsPers%2C%2C-1%7CMC_IB_UPSELL_IB_LOGOS2%2C%2C-1%7Cb2bmcpers%2C%2C-1%7CPremMCBtmSess%2C%2C-1%7CPremiumSURSess%2C%2C-1%7CMC_IB_UPSELL_IB_LOGOS%2C%2C-1%7CLaFourchette+Banners%2C%2C-1%7Csess_rev%2C%2C-1%7Csessamex%2C%2C-1%7CPremiumRRSess%2C%2C-1%7CTADORSess%2C%2C-1%7CAdsRetPers%2C%2C-1%7CTARSWBPers%2C%2C-1%7CSPMCSess%2C%2C-1%7CTheForkORSess%2C%2C-1%7CTheForkRRSess%2C%2C-1%7Cpers_rev%2C%2C-1%7CSPMCWBPers%2C%2C-1%7CRBAPers%2C%2C-1%7CRestAds%2FRSess%2C%2C-1%7CHomeAPers%2C%2C-1%7CPremiumMobPers%2C%2C-1%7CRCSess%2C%2C-1%7CLaFourchette+MC+Banners%2C%2C-1%7CRestAdsCCSess%2C%2C-1%7CRestPremRPers%2C%2C-1%7CRevHubRMPers%2C%2C-1%7CUVOwnersPers%2C%2C-1%7Csh%2C%2C-1%7Cpssamex%2C%2C-1%7CTheForkMCCSess%2C%2C-1%7CCYLPers%2C%2C-1%7CCCPers%2C%2C-1%7Cb2bmcsess%2C%2C-1%7CSPMCPers%2C%2C-1%7CRevHubRMSess%2C%2C-1%7CPremRetSess%2C%2C-1%7CViatorMCSess%2C%2C-1%7CPremiumMCPers%2C%2C-1%7CAdsRetSess%2C%2C-1%7CPremiumRRPers%2C%2C-1%7CRestAdsCCPers%2C%2C-1%7CTADORPers%2C%2C-1%7CTheForkORPers%2C%2C-1%7CPremMCBtmPers%2C%2C-1%7CTheForkRRPers%2C%2C-1%7CTARSWBSess%2C%2C-1%7CPremiumORPers%2C%2C-1%7CRestAdsSess%2C%2C-1%7CRBASess%2C%2C-1%7CSPORPers%2C%2C-1%7Cperssticker%2C%2C-1%7CSPMCWBSess%2C%2C-1%7C; TADCID=MFhE2RMsGwwmfPamABQC5UI2n8iqRdCoS-RMXjJFU1qcVD7oUKHq1hMFyGz2Z4nysXNvCpiadufOsMgt4Mg6bjLRU3iTW_GeXTI; TATravelInfo=V2*A.2*MG.-1*HP.2*FL.3*RS.1; TART=%1%enc%3ADOH0bE4QL7z%2FlmvBrHVzKA3HCFEMu4EfxFNaGypqpWd72RlKLQBeH1stk%2Fel0wo6Nox8JbUSTxk%3D; VRMCID=%1%V1*id.13092*llp.%2FShowUserReviews-g1-d8729060-r733963497-Delta_Air_Lines-World-a_cja%5C.12525324-a_cjp%5C.6167169-a_cjs%5C.k55j0oox5k01juoz0047g-m13092*e.1579106271549; ServerPool=B; PAC=AEj4evdDNZbNZGHGG-Xgw1dfjJvQeDOEcQvNGCYw0F5BsFXTJIx6ukOg0xNclfyVHe3LUJYBDhYuYIcERIXm2b9JPbI-2SwNSZsptPess6VDiMFctyK8QLVqINOig7ek-aT5Lhi1qsxjBv3Dad1Z9Hbs2pPh7-yvO165J4RRG2EuKXwYXdFrrDWNq7Covf6sVghgoBM7kULDnP9BBN_isqXHkfVRIgoLNJDumHmj4WDVAtu9abkOSrKzSQGVXpmnDP-XV8aB1toSHYOvBkZstkRnCt4ODP25HuvBV3j4HEpanzyYwvG4Z5CY6zJZCxlYvSGI4RIZZqdaSBOOadSF1sI%3D; PMC=V2*MS.39*MD.20191208*LD.20200110; TAReturnTo=%1%%2FAirline_Review-d8729060-Reviews-or5-Delta-Air-Lines; roybatty=TNI1625!ALsJkm3l4eIvh4ME8sGVmhsPT36P02QU7HmeMTiASwcTNhea0W8CJq2mniMq0Iflk8DssYmkJDXqyp1u6AFEPB%2FxJnhmE8tnfichDUb3NwHnZ%2FHG6nVgTBP9LeCgs0STBqVzL7rDPU4mAK%2FVZz1tcKS9ppnkh5ZNCXLIMmie1HCP%2C1; __vt=x1mizCeTX0xpUjBcABQCKh0bQ-d8T96qptG7UVr_ZQqQ2QQmjD7emjyCoyPRz6pQyj18I4Yx3ibAcdfbX1FOhXsD8zpxVsb4gMS9JCBm1BIdQkPfsF1z60SKF0vwdX8-gkUNd0EwdQEwmbO0tf3doo68olw; SRT=%1%enc%3ADOH0bE4QL7z%2FlmvBrHVzKA3HCFEMu4EfxFNaGypqpWd72RlKLQBeH1stk%2Fel0wo6Nox8JbUSTxk%3D; TASession=V2ID.5BCDED229346356F7F2B1D70E356E138*SQ.4*LS.DemandLoadAjax*GR.59*TCPAR.34*TBR.38*EXEX.48*ABTR.82*PHTB.34*FS.83*CPU.99*HS.recommended*ES.popularity*DS.5*SAS.popularity*FPS.oldFirst*FA.1*DF.0*TRA.true*LD.8729060; TAUD=LA-1575838414795-1*RDD-1-2019_12_09*HDD-1205990985-2020_01_05.2020_01_06*LG-2822811353-2.1.F.*LD-2822811354-.....',
  'X-Requested-By': 'TNI1625!ANFfe6CogHpOz8jgCTwqHM/O0/jDxrFtT0A+Jpk6ZIoHkoJYVvkW6f98hPt4ahjWWnZk8IMjuc2kYLhg1Bk3BawE0V/s7avJk7GzHtXT/L9tuotsBe9jbK2mlfAYwJrXsM7THIeyaK66f8nfSRLL9bENgLpD9bWjUgTx7PZZ0NOE'
}

delta = Delta(url, headers, payload)
delta.extract_data(delta.send_request())